# Webcam Calibration + Color Detection + TCP Interface + Dobot MG400

‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏Ñ‡∏°, ‡πÅ‡∏Å‡πâ Distortion, ‡πÅ‡∏•‡∏∞ ‡∏ï‡∏£‡∏ß‡∏à‡∏à‡∏±‡∏ö‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡πâ‡∏ß‡∏¢‡∏™‡∏µ (HSV) + Homography (Perspective Transform) ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå Dobot MG400 ‡∏ú‡πà‡∏≤‡∏ô TCP Socket
## üë• ‡∏à‡∏±‡∏î‡∏ó‡∏≥‡πÇ‡∏î‡∏¢

* ‡∏ô‡∏≤‡∏á‡∏™‡∏≤‡∏ß‡∏ò‡∏≤‡∏£‡∏ì‡∏≤ ‡∏°‡∏¥‡πà‡∏á‡∏°‡∏¥‡∏ï‡∏£‡∏°‡∏µ 650610840
* ‡∏ô‡∏≤‡∏¢‡∏û‡∏á‡∏®‡∏†‡∏±‡∏Ñ ‡∏™‡∏∏‡∏Ç‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå 650610847
* ‡∏ô‡∏≤‡∏¢‡∏≠‡∏ä‡∏¥‡∏ï‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå ‡πÅ‡∏û‡∏á‡πÄ‡∏û‡πá‡∏á 650610863

## üìÅ Project Structure

---

## ‚öôÔ∏è 1. Camera Calibration (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£)

* **‡πÑ‡∏ü‡∏•‡πå:** `getImages.py` ‡πÅ‡∏•‡∏∞ `calibration.py`
* **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏£‡∏ï‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏ô‡∏´‡∏°‡∏≤‡∏Å‡∏£‡∏∏‡∏Å (Chessboard Pattern)
* **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**
    1.  ‡∏£‡∏±‡∏ô `getImages.py` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ñ‡πà‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏´‡∏°‡∏≤‡∏Å‡∏£‡∏∏‡∏Å‡∏à‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢‡πÜ ‡∏°‡∏∏‡∏° (‡∏Å‡∏î `s` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å)
    2.  ‡∏£‡∏±‡∏ô `calibration.py` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏≠‡πà‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÅ‡∏•‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå `calibration.pkl`

---

## üé® 2. Find Color (‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏≤‡∏£)

* **‡πÑ‡∏ü‡∏•‡πå:** `Find_HSV.py`
* **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏≤‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡∏Ñ‡πà‡∏≤‡∏™‡∏µ (HSV) ‡∏Ç‡∏≠‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏
* **‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô:**
    1.  ‡∏£‡∏±‡∏ô `Find_HSV.py` ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏£‡∏±‡∏ö Trackbars ‡∏à‡∏ô‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏™‡∏µ‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
    2.  ‡∏ô‡∏≥‡∏Ñ‡πà‡∏≤ `lower_range` ‡πÅ‡∏•‡∏∞ `upper_range` ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ ‡πÑ‡∏õ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÉ‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `COLOR_BOUNDS` (‡πÄ‡∏ä‡πà‡∏ô `R_bounds`) ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå `senddata2.py`

---

## üñ•Ô∏è 3. Main Program (PC)

* **‡πÑ‡∏ü‡∏•‡πå:** `senddata2.py`
* **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ù‡∏±‡πà‡∏á PC ‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏•‡πâ‡∏≠‡∏á, ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏†‡∏≤‡∏û, ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏ï‡∏≤‡∏°‡∏™‡∏µ, ‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£ (TCP Client) ‡∏Å‡∏±‡∏ö‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå
* **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:**
    1.  ‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå `calibration.pkl` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏†‡∏≤‡∏û‡∏ö‡∏¥‡∏î‡πÄ‡∏ö‡∏µ‡πâ‡∏¢‡∏ß
    2.  ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ TCP/IP ‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå (IP: `192.168.1.6`, Port: `6601`)
    3.  ‡πÄ‡∏£‡∏¥‡πà‡∏° Thread 2 ‡∏ï‡∏±‡∏ß: `VisionProcessing` (‡∏´‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏™‡∏µ‡πÅ‡∏î‡∏á) ‡πÅ‡∏•‡∏∞ `Mg400` (‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Å‡∏±‡∏ö‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå)
    4.  ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤‡∏ì `start` ‡∏´‡∏£‡∏∑‡∏≠ `pos?` ‡∏à‡∏≤‡∏Å‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå
    5.  ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏à‡∏≠‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏ (`find`) ‡πÅ‡∏•‡∏∞‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏£‡πâ‡∏≠‡∏á‡∏Ç‡∏≠‡∏û‡∏¥‡∏Å‡∏±‡∏î (`pos?`), ‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏à‡∏∞‡πÅ‡∏õ‡∏•‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå (Homography) ‡πÅ‡∏•‡∏∞‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (‡πÄ‡∏ä‡πà‡∏ô `"350.12,100.45,90.0"`) ‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ

---

## ü§ñ 4. Robot Program (Robot)

* **‡πÑ‡∏ü‡∏•‡πå:** `d/src0.lua`
* **‡∏à‡∏∏‡∏î‡∏õ‡∏£‡∏∞‡∏™‡∏á‡∏Ñ‡πå:** ‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÅ‡∏Å‡∏£‡∏°‡∏´‡∏•‡∏±‡∏Å‡∏ù‡∏±‡πà‡∏á‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå (TCP Server) ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏à‡∏≤‡∏Å PC ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏´‡∏¢‡∏¥‡∏ö-‡∏ß‡∏≤‡∏á
* **‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:**
    1.  ‡∏™‡∏£‡πâ‡∏≤‡∏á TCP Server ‡∏ó‡∏µ‡πà `192.168.1.6` ‡∏û‡∏≠‡∏£‡πå‡∏ï `6601`
    2.  ‡∏£‡∏≠‡∏£‡∏±‡∏ö `hi` ‡∏à‡∏≤‡∏Å PC ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠
    3.  ‡∏ß‡∏ô loop ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô:
        * ‡∏™‡πà‡∏á `start` ‡πÑ‡∏õ‡∏¢‡∏±‡∏á PC ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ö‡∏≠‡∏Å‡πÉ‡∏´‡πâ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡∏≤‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏
        * ‡πÄ‡∏°‡∏∑‡πà‡∏≠ PC ‡∏ï‡∏≠‡∏ö `found`, ‡∏´‡∏∏‡πà‡∏ô‡∏¢‡∏ô‡∏ï‡πå‡∏à‡∏∞‡∏™‡πà‡∏á `pos?` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏û‡∏¥‡∏Å‡∏±‡∏î
        * ‡∏£‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¥‡∏Å‡∏±‡∏î (‡πÄ‡∏ä‡πà‡∏ô `"350.12,100.45,90.0"`)
        * ‡πÅ‡∏¢‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (Parse) ‡πÅ‡∏•‡∏∞‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏û‡∏¥‡∏Å‡∏±‡∏î `P2`
        * ‡πÄ‡∏Ñ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏õ‡∏´‡∏¢‡∏¥‡∏ö (`P2`) ‡πÅ‡∏•‡∏∞‡∏ß‡∏≤‡∏á (`P5`) ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏
